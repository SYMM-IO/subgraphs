specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: symmio
    network: '{{ network }}'
    source:
      address: '{{ symmioAddress }}'
      abi: symmio
      startBlock: {{ symmioStartBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Account
      abis:
        - name: symmio
          file: ./abis/symmio.json
      eventHandlers:
{{#symmioEvents}}
        - event: {{signature}}
          handler: handle{{name}}
{{/symmioEvents}}
      file: ./{{subgraphName}}/src.ts

{{#includeMultiAccount}}

{{#multiAccounts}}
  - kind: ethereum
    name: symmioMultiAccount_{{index}}
    network: '{{ network }}'
    source:
      address: '{{ symmioMultiAccountAddress }}'
      abi: symmioMultiAccount
      startBlock: {{ symmioMultiAccountStartBlock }}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Account
      abis:
        - name: symmioMultiAccount
          file: ./abis/symmioMultiAccount.json
      eventHandlers:
  {{#multiAccountEvents}}
        - event: {{signature}}
          handler: handle{{name}}
  {{/multiAccountEvents}}
      file: ./{{subgraphName}}/src.ts
{{/multiAccounts}}
  
{{/includeMultiAccount}}
